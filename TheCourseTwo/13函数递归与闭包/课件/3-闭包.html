<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>闭包</title>
</head>
<body>
	<script>
		/*
			js垃圾回收机制 ==>清空 内存
			浏览器垃圾回收器：每隔一段时间自己运行
			在js中的 无用变量 会在浏览器垃圾回收时回收

			无用的变量：浏览器自己判断 设置为null 变量 主要存在于函数内部

			全局变量不会被回收 或者说 浏览器关闭了才会被回收
			闭包中的变量不会被回收
			闭包函数的两个条件：(闭包就是能够读取其他函数内部变量的函数,类似跟链式作用域相反的意思。链式作用域是具有向上访问变量)
				1.函数内部嵌套函数
				2.内部函数用到了包含函数(外部函数)的变量
				3.返回一个函数 这个函数使用了包含函数变量， 或者是参数

		*/

		// 包含函数
		function a(){
			var n=0;
			// 内部函数
			function b(){
				n++;
				console.log(n);
			}

			b();
		}

		a();
		a();

		function fn(){
			var n=0;
			// 内部函数

			return function(){
				n++;
				console.log(n);
			}
		}

		fn();
		fn();

		// 函数调用自身 重新调用
		fn()();
		fn()();

		// 闭包 
		//相当于在函数外部访问到n
		var result=fn();
		result();
		result();
		result();
	</script>
</body>
</html>